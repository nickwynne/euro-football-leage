<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>European Fantasy League Standings - Demo Full Data</title>
<style>
:root{--bg:#0f1724;--card:#071033;--accent:#f3b23a;--muted:#94a3b8;color-scheme:dark}
*{box-sizing:border-box}
body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#071024 0%, #0b1630 100%);color:#e6eef8;margin:0;padding:28px}
header{display:flex;flex-direction:column;gap:6px;margin-bottom:18px}
h1{margin:0;font-size:28px;color:var(--accent)}
.subtitle{margin:0;color:var(--muted)}
.boards{display:flex;flex-wrap:wrap;gap:18px}
.board{background:rgba(255,255,255,0.03);border-radius:10px;padding:12px;width:620px;min-width:320px}
.board h2{margin:0 0 8px 0}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:6px 8px;text-align:left;font-size:14px}
.table th{color:var(--muted);font-weight:600;border-bottom:1px solid rgba(255,255,255,0.04)}
.manager{font-weight:700}
.small{font-size:12px;color:var(--muted)}
.club-list{font-size:13px;color:#cfe2ff}
.total{font-weight:800;text-align:right}
.record{font-weight:600;text-align:center;color:#f3b23a}
.notes{margin-top:18px;color:var(--muted)}
#notes{margin-top:20px}
.club {margin-bottom:2px}
</style>
</head>
<body>
<header>
  <h1>European Fantasy League</h1>
  <p class="subtitle">Demo Standings with Full Team Data and Records</p>
</header>
<main>
  <div id="boards" class="boards"></div>
  <section id="notes">
    <h3>Notes</h3>
    <ul>
      <li>Points and records are demo values baked directly into the page.</li>
      <li>Each fantasy team has 4 clubs; total points are summed from club points.</li>
      <li>Records (W-D-L) are randomly generated for demonstration.</li>
      <li>Ready to connect to live API with backend in next steps.</li>
    </ul>
  </section>
</main>
<script>
const API_KEY = 'fa19251211aa41cbbc11f567247ebf9a';

// League codes from football-data.org
const leagueCodes = ['SA', 'PD', 'BL1', 'FL1'];

const divisions = [
  {
    name: "It’s Called Soccer",
    teams: [
      {manager:"Portillo", clubs:["Real Betis","Mainz 05","Atalanta","Paris Saint Germain"]},
      {manager:"Nick", clubs:["Villarreal","Bayern Munich","AS Roma","Lyon"]},
      {manager:"Tim", clubs:["Barcelona","RB Leipzig","Bologna","Monaco"]},
      {manager:"Dave", clubs:["Real Madrid","FC Koln","Fiorentina","Marseille"]},
      {manager:"Tara", clubs:["Alaves","Bayern Leverkusen","AC Milan","Brest"]},
      {manager:"Chewy", clubs:["Athletico Madrid","Eintracht Frankfurt","Inter Milan","Lens"]},
      {manager:"Dallin", clubs:["Athletic Bilbao","SC Freiburg","Napoli","Nice"]},
      {manager:"Salas", clubs:["Valencia","Borussia Dortmund","Juventus","Strasbourg"]},
      {manager:"Austin", clubs:["Real Sociedad","Vfb Stuttgart","Lazio","Lille"]}
    ]
  },
  {
    name: "It’s Called Football",
    teams: [
      {manager:"Andy", clubs:["Villarreal","Vfb Strasbourg","Atalanta","Paris Saint Germain"]},
      {manager:"Darwin", clubs:["Sevilla","Bayern Munich","Roma","Strasbourg"]},
      {manager:"Tillah", clubs:["Barcelona","RB Leipzig","Como","Marseille"]},
      {manager:"Layton", clubs:["Athletico Madrid","Bayern Leverkusen","Lazio","Nice"]},
      {manager:"Marcus", clubs:["Real Betis","Vfl Wolfsburg","Napoli","Monaco"]},
      {manager:"Anthony", clubs:["Real Madrid","SC Freiburg","AC Milan","Lille"]},
      {manager:"Danvir", clubs:["Athletic Bilbao","Mainz 05","Inter Milan","Brest"]},
      {manager:"Neil", clubs:["Real Sociedad","Borussia Dortmund","Fiorentina","Lyon"]},
      {manager:"Francisco", clubs:["Celta Vigo","Eintract Frankfurt","Juventus","Lens"]}
    ]
  }
];

// Mapping to normalize club names from your lists to the API's returned names
// (You may need to adjust this based on exact API names)
const clubNameMap = {
  "Real Betis": "Real Betis Balompié",
  "Mainz 05": "1. FSV Mainz 05",
  "Atalanta": "Atalanta BC",
  "Paris Saint Germain": "Paris Saint-Germain",
  "Villarreal": "Villarreal CF",
  "Bayern Munich": "FC Bayern München",
  "AS Roma": "AS Roma",
  "Lyon": "Olympique Lyonnais",
  "Barcelona": "FC Barcelona",
  "RB Leipzig": "RB Leipzig",
  "Bologna": "Bologna FC 1909",
  "Monaco": "AS Monaco",
  "Real Madrid": "Real Madrid CF",
  "FC Koln": "1. FC Köln",
  "Fiorentina": "ACF Fiorentina",
  "Marseille": "Olympique de Marseille",
  "Alaves": "Deportivo Alavés",
  "Bayern Leverkusen": "Bayer 04 Leverkusen",
  "AC Milan": "AC Milan",
  "Brest": "Stade Brestois 29",
  "Athletico Madrid": "Atlético Madrid",
  "Eintracht Frankfurt": "Eintracht Frankfurt",
  "Inter Milan": "FC Internazionale Milano",
  "Lens": "RC Lens",
  "Athletic Bilbao": "Athletic Club",
  "SC Freiburg": "SC Freiburg",
  "Napoli": "Napoli",
  "Nice": "OGC Nice",
  "Valencia": "Valencia CF",
  "Borussia Dortmund": "Borussia Dortmund",
  "Juventus": "Juventus FC",
  "Strasbourg": "RC Strasbourg Alsace",
  "Real Sociedad": "Real Sociedad",
  "Vfb Stuttgart": "VfB Stuttgart",
  "Lazio": "SS Lazio",
  "Lille": "LOSC Lille",
  "Vfb Strasbourg": "RC Strasbourg Alsace",
  "Sevilla": "Sevilla FC",
  "Como": "Como 1907",
  "Vfl Wolfsburg": "VfL Wolfsburg",
  "Celta Vigo": "RC Celta de Vigo",
  "Eintract Frankfurt": "Eintracht Frankfurt"
};

async function fetchLeagueStandings(leagueCode) {
  const url = `https://api.football-data.org/v4/competitions/${leagueCode}/standings`;
  const res = await fetch(url, {
    headers: { 'X-Auth-Token': API_KEY }
  });
  if (!res.ok) {
    throw new Error(`Failed to fetch ${leagueCode} standings: ${res.statusText}`);
  }
  const data = await res.json();
  // Assume standings are in data.standings[0].table for current season
  return data.standings[0].table;
}

async function getAllStandings() {
  const allStandings = {};
  for (const code of leagueCodes) {
    try {
      const table = await fetchLeagueStandings(code);
      table.forEach(team => {
        allStandings[team.team.name] = team.points;
      });
    } catch (e) {
      console.error(e);
      alert(`Error fetching ${code} data: ${e.message}`);
    }
  }
  return allStandings;
}

function renderStandings(standingsPoints) {
  const boards = document.getElementById('boards');
  boards.innerHTML = '';

  divisions.forEach(div => {
    const board = document.createElement('div');
    board.className = 'board';

    const h = document.createElement('h2');
    h.textContent = div.name;
    board.appendChild(h);

    const rows = div.teams.map(t => {
      // Map clubs to API names and get points
      const clubPoints = t.clubs.map(c => {
        const apiName = clubNameMap[c] || c;
        return { name: c, pts: standingsPoints[apiName] ?? 0 };
      });
      const total = clubPoints.reduce((sum, c) => sum + c.pts, 0);
      return { ...t, clubPoints, total };
    });

    rows.sort((a,b) => b.total - a.total);

    const tbl = document.createElement('table');
    tbl.className = 'table';
    tbl.innerHTML = `<thead><tr><th>#</th><th>Manager</th><th>Clubs</th><th style="text-align:right">Total pts</th></tr></thead>`;
    const tbody = document.createElement('tbody');

    rows.forEach((r,i) => {
      const clubsHtml = r.clubPoints.map(cp => 
        `<div class="club">${cp.name} <span class="small">(${cp.pts} pts)</span></div>`
      ).join('');
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${i+1}</td><td class="manager">${r.manager}</td><td class="club-list">${clubsHtml}</td><td class="total">${r.total}</td>`;
      tbody.appendChild(tr);
    });

    tbl.appendChild(tbody);
    board.appendChild(tbl);
    boards.appendChild(board);
  });
}

// On page load fetch data and render
(async function(){
  const livePoints = await getAllStandings();
  renderStandings(livePoints);
})();
</script>
</body>
</html>
